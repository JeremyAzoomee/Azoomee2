<html>
	<head>
		<title>Game storage API - android</title>
	</head>
	<body>
		<script>
			//creating iframe
			
			var contentUrl = getUrlVars()["contentUrl"];
			var iframe = document.createElement('iframe');
			iframe.src = contentUrl;
			iframe.width  = window.innerWidth;
    		iframe.height = window.innerHeight;
			document.body.appendChild(iframe);
		
			window.addEventListener("message", receiveMessage, false);

			function getUrlVars() 
			{
				var vars = {};
				var parts = window.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi, function(m,key,value) 
				{
					vars[key] = value;
				});
				return vars;
			}
			
			function receiveMessage(event)
			{
  				for(var i = 0; i < localStorage.length; i++)
  				{
  					var title = localStorage.key(i);
  					var data = localStorage.getItem(i);
  					NativeInterface.act(title, data);
  				}
  				
    			return;
			}
			
			function addDataToLocalStorage(key, data)
			{
				localStorage[key] = data;
			}
		</script>
	</body>
</html>